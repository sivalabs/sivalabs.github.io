<!DOCTYPE html>
<html lang="en-US" prefix="og: http://ogp.me/ns#">
<head>
    
    
    <div class="analytics">
        
<script type="application/javascript">
var doNotTrack = false;
if (!doNotTrack) {
	window.ga=window.ga||function(){(ga.q=ga.q||[]).push(arguments)};ga.l=+new Date;
	ga('create', 'UA-71296890-1', 'auto');
	
	ga('send', 'pageview');
}
</script>
<script async src='https://www.google-analytics.com/analytics.js'></script>

    </div>
    
    
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <meta name="title" property="title" content="SivaLabs - Imposing Code Structure Guidelines using ArchUnit">
    <meta name="description" property="description" content="Java, Spring, SpringBoot, SpringCloud, JPA, Hibernate, DevOps, MicroServices, Docker tutorials - " >
    <title>SivaLabs - Imposing Code Structure Guidelines using ArchUnit </title>
    <meta name="twitter:card" content="summary_large_image"/>
<meta name="twitter:image" content="https://sivalabs.github.io/images/ArchUnit-Logo.png"/>

<meta name="twitter:title" content="Imposing Code Structure Guidelines using ArchUnit"/>
<meta name="twitter:description" content="While building the software we all agree, as a team, to follow a set of guidelines which are typically considered as best practices. But during the development, developers might violate those guidelines unknowingly or ignorance. Typically we rely upon code reviews or code quality checking tools like SonarQube, PMD etc to check for such violations. But some of the guidelines could be opinionated decisions which might not be able to automate using SonarQube, PMD etc."/>
<meta name="twitter:site" content="@sivalabs"/>

    <meta name="twitter:creator" content="@sivalabs"/>
    <meta property="og:title" content="Imposing Code Structure Guidelines using ArchUnit" />
<meta property="og:description" content="While building the software we all agree, as a team, to follow a set of guidelines which are typically considered as best practices. But during the development, developers might violate those guidelines unknowingly or ignorance. Typically we rely upon code reviews or code quality checking tools like SonarQube, PMD etc to check for such violations. But some of the guidelines could be opinionated decisions which might not be able to automate using SonarQube, PMD etc." />
<meta property="og:type" content="article" />
<meta property="og:url" content="https://sivalabs.github.io/2020/04/impose-architecture-guidelines-using-archunit/" />
<meta property="og:image" content="https://sivalabs.github.io/images/ArchUnit-Logo.png" />
<meta property="article:published_time" content="2020-04-02T04:59:17+05:30" />
<meta property="article:modified_time" content="2020-04-02T04:59:17+05:30" />

    <meta itemprop="name" content="Imposing Code Structure Guidelines using ArchUnit">
<meta itemprop="description" content="While building the software we all agree, as a team, to follow a set of guidelines which are typically considered as best practices. But during the development, developers might violate those guidelines unknowingly or ignorance. Typically we rely upon code reviews or code quality checking tools like SonarQube, PMD etc to check for such violations. But some of the guidelines could be opinionated decisions which might not be able to automate using SonarQube, PMD etc.">
<meta itemprop="datePublished" content="2020-04-02T04:59:17&#43;05:30" />
<meta itemprop="dateModified" content="2020-04-02T04:59:17&#43;05:30" />
<meta itemprop="wordCount" content="622">
<meta itemprop="image" content="https://sivalabs.github.io/images/ArchUnit-Logo.png">



<meta itemprop="keywords" content="Java, BestPractices," />

    <link rel='stylesheet' href="/assets/css/custom-fonts.css" type='text/css' media='all'/>

    <link rel='stylesheet' href="/assets/css/style.css" type='text/css' media='all'/>
    <link rel='stylesheet' href="/assets/css/genericons.css" type='text/css' media='all'/>
    <link rel='stylesheet' href="/assets/css/font-awesome.min.css" type='text/css' media='all'/>
    <link rel='stylesheet' href="/assets/css/socicon.css" type='text/css' media='all'/>
    <link rel="stylesheet" href="/assets/css/social-logos/social-logos.css" type="text/css" media="all">
    <link rel='stylesheet' href="/assets/css/jetpack.css" type='text/css' media='all'/>
    <link rel='stylesheet' href="/assets/css/custom-styles.css" type='text/css' media='all'/>

    <script type='text/javascript' src="/assets/js/jquery-1.12.4.min.js"></script>
    <script type='text/javascript' src="/assets/js/html5shiv.min.js"></script>
    <script type='text/javascript' src="/assets/js/navigation.js"></script>

    <link rel="shortcut icon" href="/favicon.png" type="image/x-icon" />

    

</head>
<body class="home blog logged-in admin-bar no-customize-support post-layout-one-column">
    <div id="header-top" class="header-bar-wrap"></div>
    <div id="page" class="hfeed site">
        <a class="skip-link screen-reader-text" href="#content">Skip to content</a>
        <header id="masthead" class="site-header clearfix" role="banner">
    <div class="header-main container clearfix">
        <div id="logo" class="site-branding clearfix">
            <h1 class="site-title">
                <a href="/" title="SivaLabs" rel="home">SivaLabs</a>
            </h1>
            <p class="site-description">My Experiments on Technology</p>
        </div>
        <div class="header-widgets clearfix">
        </div>
    </div>
    <div id="main-navigation-wrap" class="primary-navigation-wrap">
        <nav id="main-navigation" class="primary-navigation navigation container clearfix" role="navigation">
            <ul id="menu-home" class="main-navigation-menu">
                <li id="menu-item-1145" class="menu-item menu-item-type-custom menu-item-object-custom current-menu-item current_page_item menu-item-home menu-item-1145">
                    <a href="/">Home</a>
                </li>
                <li id="menu-item-1421" class="menu-item menu-item-type-taxonomy menu-item-object-category menu-item-1421">
                    <a href="/categories/java">Java</a>
                </li>
                <li id="menu-item-1423" class="menu-item menu-item-type-taxonomy menu-item-object-category menu-item-has-children menu-item-1423">
                    <a href="/categories/spring">Spring</a>
                    <ul class="sub-menu">
                        <li id="menu-item-1424" class="menu-item menu-item-type-taxonomy menu-item-object-category menu-item-1424">
                            <a href="/categories/springboot">Spring Boot</a>
                        </li>
                        <li id="menu-item-1425" class="menu-item menu-item-type-taxonomy menu-item-object-category menu-item-1425">
                            <a href="/categories/springcloud">Spring Cloud</a>
                        </li>
                    </ul>
                </li>
                <li id="menu-item-1422" class="menu-item menu-item-type-taxonomy menu-item-object-category menu-item-1422">
                    <a href="/categories/microservices">MicroServices</a>
                </li>
                <li id="menu-item-1151" class="menu-item menu-item-type-post_type menu-item-object-page menu-item-1151">
                    <a href="/videos">Videos</a>
                </li>
                <li id="menu-item-1161" class="menu-item menu-item-type-post_type menu-item-object-page menu-item-1161">
                    <a href="/mybooks">My Books</a>
                </li>
                <li id="menu-item-1171" class="menu-item menu-item-type-post_type menu-item-object-page menu-item-1171">
                    <a href="/projects">My Projects</a>
                </li>
                <li id="menu-item-1146" class="menu-item menu-item-type-post_type menu-item-object-page menu-item-1146">
                    <a href="/contact">Contact</a>
                </li>
            </ul>
        </nav>
    </div>
</header>
        <div id="content" class="site-content container clearfix">
            <section id="primary" class="content-archive content-area">
                
<main id="main" class="site-main" role="main">
<article class="post type-post status-publish format-standard hentry">
    <div class="post-inner-content">
        <header class="entry-header">
    <div class="entry-meta">
        <span class="meta-date">
            <a href="https://sivalabs.github.io/2020/04/impose-architecture-guidelines-using-archunit/" rel="bookmark">
                <time class="entry-date published" datetime="2020-04-02T04:59:17">
                April 02, 2020
                </time>
            </a>
        </span>
        <span class="meta-author">
            <span class="author vcard">Siva</span>
        </span>
    </div>
    <h2 class="entry-title">
        <a href="https://sivalabs.github.io/2020/04/impose-architecture-guidelines-using-archunit/" rel="bookmark">
            Imposing Code Structure Guidelines using ArchUnit
        </a>
    </h2>
    <div>
        
        
        
        <span class="tagcloud post-tags">
            <i class="fa fa-tags"></i>
            
            <a class="tag-cloud-link widget__link widget__link--taglist" href="/tags/java-bestpractices/">Java, BestPractices</a>
            
            
        </span>
        
        
    </div>
</header>

        <div class="entry-content">
            <p>While building the software we all agree, as a team, to follow a set of guidelines which are typically considered as best practices.
But during the development, developers might violate those guidelines unknowingly or ignorance.
Typically we rely upon <strong>code reviews</strong> or code quality checking tools like <strong>SonarQube</strong>, <strong>PMD</strong> etc to check for such violations.
But some of the guidelines could be opinionated decisions which might not be able to automate using SonarQube, PMD etc.</p>
<p>For example, typically I would like to follow the guidelines mentioned below for my Java based applications:</p>
<ol>
<li>
<p><strong>Follow 3-tier layering structure</strong> (Web, Service, Repository layers) where any layer can only talk to the immediate lower layer and lower layer must not talk to upper layer.
i.e, Web layer can talk to Service layer, Service layer can talk to Repository layer. But Repository layer can&rsquo;t talk to Service or Web layer, Service layer can&rsquo;t talk to Web layer.</p>
</li>
<li>
<p>If the application is big we might want to follow <strong>Package-By-Feature</strong> where only the Web and Service components are public and rest of the components should be package-private in each feature package.</p>
</li>
<li>
<p>While using Spring dependency injection, <strong>Don&rsquo;t use Field based injection</strong> and prefer Constructor based injection.</p>
</li>
</ol>
<p>Like this there could be many guidelines we want to follow. The good news is we can impose these guidelines as verifiable JUnit tests using <a href="https://www.archunit.org/">ArchUnit</a>.</p>
<p><img src="/images/ArchUnit-Logo.png" alt="ArchUnit" title="ArchUnit"></p>
<p>Here is the <a href="https://www.archunit.org/userguide/html/000_Index.html">ArchUnit UserGuide</a></p>
<p>Let us see how we can use ArchUnit for testing our architecture guidelines.</p>
<p>Add the following <strong>archunit-junit5</strong> dependency.</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-xml" data-lang="xml"><span style="color:#f92672">&lt;dependency&gt;</span>
    <span style="color:#f92672">&lt;groupId&gt;</span>com.tngtech.archunit<span style="color:#f92672">&lt;/groupId&gt;</span>
    <span style="color:#f92672">&lt;artifactId&gt;</span>archunit-junit5<span style="color:#f92672">&lt;/artifactId&gt;</span>
    <span style="color:#f92672">&lt;version&gt;</span>0.13.1<span style="color:#f92672">&lt;/version&gt;</span>
    <span style="color:#f92672">&lt;scope&gt;</span>test<span style="color:#f92672">&lt;/scope&gt;</span>
<span style="color:#f92672">&lt;/dependency&gt;</span>
</code></pre></div><p>Let us see how we can apply various guidelines that I mentioned above.</p>
<h3 id="rule-1-services-and-repositories-should-not-talk-to-web-layer">Rule 1: Services and Repositories should not talk to Web layer</h3>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-java" data-lang="java"><span style="color:#f92672">package</span> com.sivalabs.moviebuffs<span style="color:#f92672">;</span>

<span style="color:#f92672">import</span> com.tngtech.archunit.core.domain.JavaClasses<span style="color:#f92672">;</span>
<span style="color:#f92672">import</span> com.tngtech.archunit.core.importer.ClassFileImporter<span style="color:#f92672">;</span>
<span style="color:#f92672">import</span> com.tngtech.archunit.core.importer.ImportOption<span style="color:#f92672">;</span>
<span style="color:#f92672">import</span> org.junit.jupiter.api.Test<span style="color:#f92672">;</span>
<span style="color:#f92672">import static</span> com.tngtech.archunit.lang.syntax.ArchRuleDefinition.*<span style="color:#f92672">;</span>
<span style="color:#f92672">import static</span> com.tngtech.archunit.library.Architectures.layeredArchitecture<span style="color:#f92672">;</span>

<span style="color:#66d9ef">class</span> <span style="color:#a6e22e">ArchTest</span> <span style="color:#f92672">{</span>

    <span style="color:#a6e22e">@Test</span>
    <span style="color:#66d9ef">void</span> <span style="color:#a6e22e">servicesAndRepositoriesShouldNotDependOnWebLayer</span><span style="color:#f92672">()</span> <span style="color:#f92672">{</span>
      JavaClasses importedClasses <span style="color:#f92672">=</span> <span style="color:#66d9ef">new</span> ClassFileImporter<span style="color:#f92672">()</span>
          <span style="color:#f92672">.</span><span style="color:#a6e22e">withImportOption</span><span style="color:#f92672">(</span>ImportOption<span style="color:#f92672">.</span><span style="color:#a6e22e">Predefined</span><span style="color:#f92672">.</span><span style="color:#a6e22e">DO_NOT_INCLUDE_TESTS</span><span style="color:#f92672">)</span>
          <span style="color:#f92672">.</span><span style="color:#a6e22e">importPackages</span><span style="color:#f92672">(</span><span style="color:#e6db74">&#34;com.sivalabs.moviebuffs&#34;</span><span style="color:#f92672">);</span>

      noClasses<span style="color:#f92672">()</span>
          <span style="color:#f92672">.</span><span style="color:#a6e22e">that</span><span style="color:#f92672">().</span><span style="color:#a6e22e">resideInAnyPackage</span><span style="color:#f92672">(</span><span style="color:#e6db74">&#34;com.sivalabs.moviebuffs.core.service..&#34;</span><span style="color:#f92672">)</span>
            <span style="color:#f92672">.</span><span style="color:#a6e22e">or</span><span style="color:#f92672">().</span><span style="color:#a6e22e">resideInAnyPackage</span><span style="color:#f92672">(</span><span style="color:#e6db74">&#34;com.sivalabs.moviebuffs.core.repository..&#34;</span><span style="color:#f92672">)</span>
          <span style="color:#f92672">.</span><span style="color:#a6e22e">should</span><span style="color:#f92672">()</span>
            <span style="color:#f92672">.</span><span style="color:#a6e22e">dependOnClassesThat</span><span style="color:#f92672">()</span>
            <span style="color:#f92672">.</span><span style="color:#a6e22e">resideInAnyPackage</span><span style="color:#f92672">(</span><span style="color:#e6db74">&#34;com.sivalabs.moviebuffs.web..&#34;</span><span style="color:#f92672">)</span>
          <span style="color:#f92672">.</span><span style="color:#a6e22e">because</span><span style="color:#f92672">(</span><span style="color:#e6db74">&#34;Services and repositories should not depend on web layer&#34;</span><span style="color:#f92672">)</span>
          <span style="color:#f92672">.</span><span style="color:#a6e22e">check</span><span style="color:#f92672">(</span>importedClasses<span style="color:#f92672">);</span>
    <span style="color:#f92672">}</span>

<span style="color:#f92672">}</span>
</code></pre></div><p>The ArchUnit provides DSL that&rsquo;s pretty clear to understand the intent of the test. The above test code reads like English sentence and easy to understand what we are testing.</p>
<h3 id="rule-2-should-follow-layered-architecture">Rule 2: Should follow Layered Architecture</h3>
<p>In a typical SpringBoot application, <strong>Service</strong> layer depends on <strong>Repository</strong> layer, <strong>Web</strong> and <strong>Config</strong> layers depends on <strong>Service</strong> layer. <strong>We don&rsquo;t want Web or Config layer directly talk to Repository layer.</strong></p>
<p>We can impose that restriction with the following test.</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-java" data-lang="java"><span style="color:#a6e22e">@Test</span>
<span style="color:#66d9ef">void</span> <span style="color:#a6e22e">shouldFollowLayeredArchitecture</span><span style="color:#f92672">()</span> <span style="color:#f92672">{</span>
  JavaClasses importedClasses <span style="color:#f92672">=</span> <span style="color:#66d9ef">new</span> ClassFileImporter<span style="color:#f92672">()</span>
          <span style="color:#f92672">.</span><span style="color:#a6e22e">withImportOption</span><span style="color:#f92672">(</span>ImportOption<span style="color:#f92672">.</span><span style="color:#a6e22e">Predefined</span><span style="color:#f92672">.</span><span style="color:#a6e22e">DO_NOT_INCLUDE_TESTS</span><span style="color:#f92672">)</span>
          <span style="color:#f92672">.</span><span style="color:#a6e22e">importPackages</span><span style="color:#f92672">(</span><span style="color:#e6db74">&#34;com.sivalabs.moviebuffs&#34;</span><span style="color:#f92672">);</span>

  layeredArchitecture<span style="color:#f92672">()</span>
      <span style="color:#f92672">.</span><span style="color:#a6e22e">layer</span><span style="color:#f92672">(</span><span style="color:#e6db74">&#34;Web&#34;</span><span style="color:#f92672">).</span><span style="color:#a6e22e">definedBy</span><span style="color:#f92672">(</span><span style="color:#e6db74">&#34;..web..&#34;</span><span style="color:#f92672">)</span>
      <span style="color:#f92672">.</span><span style="color:#a6e22e">layer</span><span style="color:#f92672">(</span><span style="color:#e6db74">&#34;Config&#34;</span><span style="color:#f92672">).</span><span style="color:#a6e22e">definedBy</span><span style="color:#f92672">(</span><span style="color:#e6db74">&#34;..config..&#34;</span><span style="color:#f92672">)</span>
      <span style="color:#f92672">.</span><span style="color:#a6e22e">layer</span><span style="color:#f92672">(</span><span style="color:#e6db74">&#34;Service&#34;</span><span style="color:#f92672">).</span><span style="color:#a6e22e">definedBy</span><span style="color:#f92672">(</span><span style="color:#e6db74">&#34;..service..&#34;</span><span style="color:#f92672">)</span>
      <span style="color:#f92672">.</span><span style="color:#a6e22e">layer</span><span style="color:#f92672">(</span><span style="color:#e6db74">&#34;Persistence&#34;</span><span style="color:#f92672">).</span><span style="color:#a6e22e">definedBy</span><span style="color:#f92672">(</span><span style="color:#e6db74">&#34;..repository..&#34;</span><span style="color:#f92672">)</span>

      <span style="color:#f92672">.</span><span style="color:#a6e22e">whereLayer</span><span style="color:#f92672">(</span><span style="color:#e6db74">&#34;Web&#34;</span><span style="color:#f92672">).</span><span style="color:#a6e22e">mayNotBeAccessedByAnyLayer</span><span style="color:#f92672">()</span>
      <span style="color:#f92672">.</span><span style="color:#a6e22e">whereLayer</span><span style="color:#f92672">(</span><span style="color:#e6db74">&#34;Service&#34;</span><span style="color:#f92672">).</span><span style="color:#a6e22e">mayOnlyBeAccessedByLayers</span><span style="color:#f92672">(</span><span style="color:#e6db74">&#34;Config&#34;</span><span style="color:#f92672">,</span> <span style="color:#e6db74">&#34;Web&#34;</span><span style="color:#f92672">)</span>
      <span style="color:#f92672">.</span><span style="color:#a6e22e">whereLayer</span><span style="color:#f92672">(</span><span style="color:#e6db74">&#34;Persistence&#34;</span><span style="color:#f92672">).</span><span style="color:#a6e22e">mayOnlyBeAccessedByLayers</span><span style="color:#f92672">(</span><span style="color:#e6db74">&#34;Service&#34;</span><span style="color:#f92672">)</span>
      <span style="color:#f92672">.</span><span style="color:#a6e22e">check</span><span style="color:#f92672">(</span>importedClasses<span style="color:#f92672">);</span>
<span style="color:#f92672">}</span>
</code></pre></div><h3 id="rule-3-springs-autowired-should-not-be-used-with-field-based-injection">Rule 3: Spring&rsquo;s @Autowired should NOT be used with Field based injection</h3>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-java" data-lang="java"><span style="color:#a6e22e">@Test</span>
<span style="color:#66d9ef">void</span> <span style="color:#a6e22e">shouldNotUseFieldInjection</span><span style="color:#f92672">()</span> <span style="color:#f92672">{</span>
    JavaClasses importedClasses <span style="color:#f92672">=</span> <span style="color:#66d9ef">new</span> ClassFileImporter<span style="color:#f92672">()</span>
          <span style="color:#f92672">.</span><span style="color:#a6e22e">withImportOption</span><span style="color:#f92672">(</span>ImportOption<span style="color:#f92672">.</span><span style="color:#a6e22e">Predefined</span><span style="color:#f92672">.</span><span style="color:#a6e22e">DO_NOT_INCLUDE_TESTS</span><span style="color:#f92672">)</span>
          <span style="color:#f92672">.</span><span style="color:#a6e22e">importPackages</span><span style="color:#f92672">(</span><span style="color:#e6db74">&#34;com.sivalabs.moviebuffs&#34;</span><span style="color:#f92672">);</span>

    noFields<span style="color:#f92672">()</span>
      <span style="color:#f92672">.</span><span style="color:#a6e22e">should</span><span style="color:#f92672">().</span><span style="color:#a6e22e">beAnnotatedWith</span><span style="color:#f92672">(</span>Autowired<span style="color:#f92672">.</span><span style="color:#a6e22e">class</span><span style="color:#f92672">)</span>
      <span style="color:#f92672">.</span><span style="color:#a6e22e">check</span><span style="color:#f92672">(</span>importedClasses<span style="color:#f92672">);</span>
<span style="color:#f92672">}</span>
</code></pre></div><h3 id="rule-4-should-follow-naming-convention">Rule 4: Should follow Naming convention</h3>
<p>We might want to follow some naming conventions like all service class names should end with <strong>Service</strong> etc.</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-java" data-lang="java"><span style="color:#a6e22e">@Test</span>
<span style="color:#66d9ef">void</span> <span style="color:#a6e22e">shouldFollowNamingConvention</span><span style="color:#f92672">()</span> <span style="color:#f92672">{</span>
    JavaClasses importedClasses <span style="color:#f92672">=</span> <span style="color:#66d9ef">new</span> ClassFileImporter<span style="color:#f92672">()</span>
        <span style="color:#f92672">.</span><span style="color:#a6e22e">withImportOption</span><span style="color:#f92672">(</span>ImportOption<span style="color:#f92672">.</span><span style="color:#a6e22e">Predefined</span><span style="color:#f92672">.</span><span style="color:#a6e22e">DO_NOT_INCLUDE_TESTS</span><span style="color:#f92672">)</span>
        <span style="color:#f92672">.</span><span style="color:#a6e22e">importPackages</span><span style="color:#f92672">(</span><span style="color:#e6db74">&#34;com.sivalabs.moviebuffs&#34;</span><span style="color:#f92672">);</span>
    classes<span style="color:#f92672">()</span>
        <span style="color:#f92672">.</span><span style="color:#a6e22e">that</span><span style="color:#f92672">().</span><span style="color:#a6e22e">resideInAPackage</span><span style="color:#f92672">(</span><span style="color:#e6db74">&#34;com.sivalabs.moviebuffs.core.repository&#34;</span><span style="color:#f92672">)</span>
        <span style="color:#f92672">.</span><span style="color:#a6e22e">should</span><span style="color:#f92672">().</span><span style="color:#a6e22e">haveSimpleNameEndingWith</span><span style="color:#f92672">(</span><span style="color:#e6db74">&#34;Repository&#34;</span><span style="color:#f92672">)</span>
        <span style="color:#f92672">.</span><span style="color:#a6e22e">check</span><span style="color:#f92672">(</span>importedClasses<span style="color:#f92672">);</span>

    classes<span style="color:#f92672">()</span>
        <span style="color:#f92672">.</span><span style="color:#a6e22e">that</span><span style="color:#f92672">().</span><span style="color:#a6e22e">resideInAPackage</span><span style="color:#f92672">(</span><span style="color:#e6db74">&#34;com.sivalabs.moviebuffs.core.service&#34;</span><span style="color:#f92672">)</span>
        <span style="color:#f92672">.</span><span style="color:#a6e22e">should</span><span style="color:#f92672">().</span><span style="color:#a6e22e">haveSimpleNameEndingWith</span><span style="color:#f92672">(</span><span style="color:#e6db74">&#34;Service&#34;</span><span style="color:#f92672">)</span>
        <span style="color:#f92672">.</span><span style="color:#a6e22e">check</span><span style="color:#f92672">(</span>importedClasses<span style="color:#f92672">);</span>
<span style="color:#f92672">}</span>
</code></pre></div><h3 id="rule-5-should-use-junit-5-only">Rule 5: Should use JUnit 5 only</h3>
<p>We might want to use <strong>JUnit 5</strong> as our testing framework. But JUnit 4 dependency might have pulled into classpath as a transitive dependency (cough&hellip; <strong>Testcontainers</strong>&hellip; cough) and we might accidentally import JUnit4 classes/annotation such as <strong>@Test</strong>, <strong>Assert</strong> etc by mistake.</p>
<p>We can restrict the usage of JUnit 4 classes as follows:</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-java" data-lang="java"><span style="color:#a6e22e">@Test</span>
<span style="color:#66d9ef">void</span> <span style="color:#a6e22e">shouldNotUseJunit4Classes</span><span style="color:#f92672">()</span> <span style="color:#f92672">{</span>
    JavaClasses classes <span style="color:#f92672">=</span> <span style="color:#66d9ef">new</span> ClassFileImporter<span style="color:#f92672">()</span>
        <span style="color:#f92672">.</span><span style="color:#a6e22e">importPackages</span><span style="color:#f92672">(</span><span style="color:#e6db74">&#34;com.sivalabs.moviebuffs&#34;</span><span style="color:#f92672">);</span>

    noClasses<span style="color:#f92672">()</span>
        <span style="color:#f92672">.</span><span style="color:#a6e22e">should</span><span style="color:#f92672">().</span><span style="color:#a6e22e">accessClassesThat</span><span style="color:#f92672">().</span><span style="color:#a6e22e">resideInAnyPackage</span><span style="color:#f92672">(</span><span style="color:#e6db74">&#34;org.junit&#34;</span><span style="color:#f92672">)</span>
        <span style="color:#f92672">.</span><span style="color:#a6e22e">because</span><span style="color:#f92672">(</span><span style="color:#e6db74">&#34;Tests should use Junit5 instead of Junit4&#34;</span><span style="color:#f92672">)</span>
        <span style="color:#f92672">.</span><span style="color:#a6e22e">check</span><span style="color:#f92672">(</span>classes<span style="color:#f92672">);</span>

    noMethods<span style="color:#f92672">().</span><span style="color:#a6e22e">should</span><span style="color:#f92672">().</span><span style="color:#a6e22e">beAnnotatedWith</span><span style="color:#f92672">(</span><span style="color:#e6db74">&#34;org.junit.Test&#34;</span><span style="color:#f92672">)</span>
        <span style="color:#f92672">.</span><span style="color:#a6e22e">orShould</span><span style="color:#f92672">().</span><span style="color:#a6e22e">beAnnotatedWith</span><span style="color:#f92672">(</span><span style="color:#e6db74">&#34;org.junit.Ignore&#34;</span><span style="color:#f92672">)</span>
        <span style="color:#f92672">.</span><span style="color:#a6e22e">because</span><span style="color:#f92672">(</span><span style="color:#e6db74">&#34;Tests should use Junit5 instead of Junit4&#34;</span><span style="color:#f92672">)</span>
        <span style="color:#f92672">.</span><span style="color:#a6e22e">check</span><span style="color:#f92672">(</span>classes<span style="color:#f92672">);</span>
<span style="color:#f92672">}</span>
</code></pre></div><p>I just described only a few of the possibilities and you can get as creative as you want 😉</p>
<p>Please read the official <a href="https://www.archunit.org/userguide/html/000_Index.html">ArchUnit UserGuide</a> on what are all the cool things you can do with <strong>ArchUnit</strong>.</p>

        </div>
        <div class="sharedaddy sd-sharing-enabled">
    <div class="robots-nocontent sd-block sd-social sd-social-icon sd-sharing">
        <h3 class="sd-title">Share this:</h3>
        <div class="sd-content">
            <ul>
                <li class="share-twitter"><a rel="nofollow" data-shared="sharing-twitter-1144" class="share-twitter sd-button share-icon no-text" href="https://twitter.com/intent/tweet?status=Imposing%20Code%20Structure%20Guidelines%20using%20ArchUnit-https%3a%2f%2fsivalabs.github.io%2f2020%2f04%2fimpose-architecture-guidelines-using-archunit%2f" target="_blank" title="Click to share on Twitter"><span></span><span class="sharing-screen-reader-text">Click to share on Twitter (Opens in new window)</span></a></li>
                <li class="share-facebook"><a rel="nofollow" data-shared="sharing-facebook-1144" class="share-facebook sd-button share-icon no-text" href="https://www.facebook.com/sharer/sharer.php?u=https%3a%2f%2fsivalabs.github.io%2f2020%2f04%2fimpose-architecture-guidelines-using-archunit%2f" target="_blank" title="Click to share on Facebook"><span></span><span class="sharing-screen-reader-text">Click to share on Facebook (Opens in new window)</span></a></li>
                <li class="share-google-plus-1"><a rel="nofollow" data-shared="sharing-google-1144" class="share-google-plus-1 sd-button share-icon no-text" href="https://plus.google.com/share?url=https%3a%2f%2fsivalabs.github.io%2f2020%2f04%2fimpose-architecture-guidelines-using-archunit%2f" target="_blank" title="Click to share on Google+"><span></span><span class="sharing-screen-reader-text">Click to share on Google+ (Opens in new window)</span></a></li>
                <li class="share-reddit"><a rel="nofollow" data-shared="" class="share-reddit sd-button share-icon no-text" href="http://www.reddit.com/submit?url=https%3a%2f%2fsivalabs.github.io%2f2020%2f04%2fimpose-architecture-guidelines-using-archunit%2f&title=Imposing%20Code%20Structure%20Guidelines%20using%20ArchUnit" target="_blank" title="Click to share on Reddit"><span></span><span class="sharing-screen-reader-text">Click to share on Reddit (Opens in new window)</span></a></li>
                <li class="share-linkedin"><a rel="nofollow" data-shared="sharing-linkedin-1144" class="share-linkedin sd-button share-icon no-text" href="http://www.linkedin.com/shareArticle?mini=true&url=https%3a%2f%2fsivalabs.github.io%2f2020%2f04%2fimpose-architecture-guidelines-using-archunit%2f&title=Imposing%20Code%20Structure%20Guidelines%20using%20ArchUnit" target="_blank" title="Click to share on LinkedIn"><span></span><span class="sharing-screen-reader-text">Click to share on LinkedIn (Opens in new window)</span></a></li>
                <li class="share-end"></li>
            </ul>
        </div>
    </div>
</div>

    </div>
</article>


<div class="comments">
	<div id="disqus_thread"></div>
<script type="application/javascript">
    var disqus_config = function () {
    
    
    
    };
    (function() {
        if (["localhost", "127.0.0.1"].indexOf(window.location.hostname) != -1) {
            document.getElementById('disqus_thread').innerHTML = 'Disqus comments not available by default when the website is previewed locally.';
            return;
        }
        var d = document, s = d.createElement('script'); s.async = true;
        s.src = '//' + "sivalabs" + '.disqus.com/embed.js';
        s.setAttribute('data-timestamp', +new Date());
        (d.head || d.body).appendChild(s);
    })();
</script>
<noscript>Please enable JavaScript to view the <a href="https://disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript>
<a href="https://disqus.com" class="dsq-brlink">comments powered by <span class="logo-disqus">Disqus</span></a>
</div>



<nav class="navigation post-navigation" role="navigation">
	<h2 class="screen-reader-text">Post navigation</h2>
	<div class="nav-links">
		<div class="nav-previous">
			<a href="/2020/04/what-i-learned-2020-week-14/" rel="next">
				<i class="fa fa-chevron-left"></i>
				<span class="post-title">What I Learned in Week-14, 2020</span>
			</a>
		</div>
		<div class="nav-next">
			<a href="/2020/03/what-i-learned-2020-week-11/" rel="prev">
                <span class="post-title">What I Learned in Week-11, 2020
                    <i class="fa fa-chevron-right"></i>
                </span>
			</a>
		</div>
	</div>
</nav>

</main>

            </section>

            <section id="secondary" class="sidebar widget-area clearfix" role="complementary">
                
<aside id="zoom-social-icons-widget-2" class="widget zoom-social-icons-widget">
    <h3 class="widget-title">Follow Me</h3>

    <ul class="zoom-social-icons-list zoom-social-icons-list--with-canvas zoom-social-icons-list--rounded zoom-social-icons-list--no-labels">

        
        <li class="zoom-social_icons-list__item">
            <a class="zoom-social_icons-list__link"
               href="https://github.com/sivaprasadreddy"
               target="_blank">
                    <span class="zoom-social_icons-list-span socicon socicon-github"
                          data-hover-rule="background-color" data-hover-color="#221e1b"

                    ></span>
            </a>
        </li>
        

        
        <li class="zoom-social_icons-list__item">
            <a class="zoom-social_icons-list__link"
               href="https://twitter.com/sivalabs"
               target="_blank">
                    <span class="zoom-social_icons-list-span socicon socicon-twitter"
                          data-hover-rule="background-color" data-hover-color="#55acee"
                    ></span>
            </a>
        </li>
        

        

        

        
        <li class="zoom-social_icons-list__item">
            <a class="zoom-social_icons-list__link"
               href="https://in.linkedin.com/in/siva-prasad-reddy-k-3a909172"
               target="_blank">
                    <span class="zoom-social_icons-list-span socicon socicon-linkedin"
                          data-hover-rule="background-color" data-hover-color="#3371b7"
                    ></span>
            </a>
        </li>

        

        
        <li class="zoom-social_icons-list__item">
            <a class="zoom-social_icons-list__link"
               href="http://www.youtube.com/c/SivaPrasadReddy%20"
               target="_blank">
                    <span class="zoom-social_icons-list-span socicon socicon-youtube"
                          data-hover-rule="background-color" data-hover-color="#e02a20"
                    ></span>
            </a>
        </li>
        
    </ul>
</aside>



<aside id="recent-posts-2" class="widget widget_recent_entries clearfix">
    <div class="widget-header">
        <h3 class="widget-title">Recent Posts</h3>
    </div>
    <ul>
        <li class="widget__item"><a class="widget__link" href="/2020/07/golang-from-a-java-developer-perspective/">GoLang from a Java developer perspective</a></li>
        <li class="widget__item"><a class="widget__link" href="/2020/06/my-proud-moment-as-a-mentor/">My proud moment as a mentor</a></li>
        <li class="widget__item"><a class="widget__link" href="/2020/05/remote-debugging-spring-boot-application/">Remote debugging springboot application</a></li>
        <li class="widget__item"><a class="widget__link" href="/2020/04/what-i-learned-2020-week-14/">What I Learned in Week-14, 2020</a></li>
        <li class="widget__item"><a class="widget__link" href="/2020/04/impose-architecture-guidelines-using-archunit/">Imposing Code Structure Guidelines using ArchUnit</a></li>
    </ul>

</aside>

<aside id="top-posts-2" class="widget widget_top-posts clearfix">
    <div class="widget-header"><h3 class="widget-title">Top Posts &amp; Pages</h3></div>
    <ul>

        <li>
            <a href="/2016/03/why-springboot/"
            class="bump-view" data-bump-view="tp">
            Why SpringBoot?</a>
        </li>

        <li>
            <a href="/2016/03/how-springboot-autoconfiguration-magic/"
            class="bump-view" data-bump-view="tp">
            How SpringBoot AutoConfiguration magic works?</a>
        </li>

        <li>
            <a href="/2015/11/developing-a-simple-e-commerce-application-from-scratch-to-production-using-springboot/"
            class="bump-view" data-bump-view="tp">
            Developing a simple e-commerce application from scratch to production using SpringBoot</a>
        </li>

        <li>
            <a href="/2013/12/clean-code-dont-mix-different-levels-of-abstractions/"
            class="bump-view" data-bump-view="tp">
            Clean Code: Don’t mix different levels of abstractions</a>
        </li>

        <li>
            <a href="/2015/06/a-developers-perspective-on-spring-vs-javaee/"
            class="bump-view" data-bump-view="tp">
            A Developers Perspective on Spring vs JavaEE</a>
        </li>

        <li>
            <a href="/2015/07/my-life-as-software-developer-in-india/"
            class="bump-view" data-bump-view="tp">
            My Life as a Software Developer in India</a>
        </li>

        <li>
            <a href="/2011/01/10-things-to-become-outstanding-java/"
            class="bump-view" data-bump-view="tp">
            10 things to become an outstanding Java developer</a>
        </li>
</ul>
</aside>

<aside id="categories-2" class="widget widget_categories clearfix">
    <div class="widget-header"><h3 class="widget-title">Categories</h3></div>
    <ul>
        <li class="cat-item"><a href="/categories/best-practices">Best-Practices</a></li>
        <li class="cat-item"><a href="/categories/blog">Blog</a></li>
        <li class="cat-item"><a href="/categories/books">Books</a></li>
        <li class="cat-item"><a href="/categories/career">Career</a></li>
        <li class="cat-item"><a href="/categories/golang">Golang</a></li>
        <li class="cat-item"><a href="/categories/ide">Ide</a></li>
        <li class="cat-item"><a href="/categories/java">Java</a></li>
        <li class="cat-item"><a href="/categories/javaee">Javaee</a></li>
        <li class="cat-item"><a href="/categories/kafka">Kafka</a></li>
        <li class="cat-item"><a href="/categories/linux">Linux</a></li>
        <li class="cat-item"><a href="/categories/microservices">Microservices</a></li>
        <li class="cat-item"><a href="/categories/misc">Misc</a></li>
        <li class="cat-item"><a href="/categories/spring">Spring</a></li>
        <li class="cat-item"><a href="/categories/springboot">Springboot</a></li>
        <li class="cat-item"><a href="/categories/springcloud">Springcloud</a></li>
        <li class="cat-item"><a href="/categories/testing">Testing</a></li>
        <li class="cat-item"><a href="/categories/tips">Tips</a></li>
        <li class="cat-item"><a href="/categories/travis-ci">Travis-Ci</a></li>
        <li class="cat-item"><a href="/categories/videos">Videos</a></li>
    </ul>
</aside>


<aside id="tag_cloud-3" class="widget widget_tag_cloud clearfix">
    <div class="widget-header"><h3 class="widget-title">Tags</h3></div>
    <div class="tagcloud">

        <div class="widget__content">
            <a class="tag-cloud-link widget__link widget__link--taglist"
               href="/tags/android" title="android">android</a>
            <a class="tag-cloud-link widget__link widget__link--taglist"
               href="/tags/best-practices" title="best-practices">best-practices</a>
            <a class="tag-cloud-link widget__link widget__link--taglist"
               href="/tags/blog" title="blog">blog</a>
            <a class="tag-cloud-link widget__link widget__link--taglist"
               href="/tags/blogging" title="blogging">blogging</a>
            <a class="tag-cloud-link widget__link widget__link--taglist"
               href="/tags/books" title="books">books</a>
            <a class="tag-cloud-link widget__link widget__link--taglist"
               href="/tags/career-it" title="career-it">career-it</a>
            <a class="tag-cloud-link widget__link widget__link--taglist"
               href="/tags/e-commerce" title="e-commerce">e-commerce</a>
            <a class="tag-cloud-link widget__link widget__link--taglist"
               href="/tags/golang-java" title="golang-java">golang-java</a>
            <a class="tag-cloud-link widget__link widget__link--taglist"
               href="/tags/ide" title="ide">ide</a>
            <a class="tag-cloud-link widget__link widget__link--taglist"
               href="/tags/interviews" title="interviews">interviews</a>
            <a class="tag-cloud-link widget__link widget__link--taglist"
               href="/tags/it" title="it">it</a>
            <a class="tag-cloud-link widget__link widget__link--taglist"
               href="/tags/java" title="java">java</a>
            <a class="tag-cloud-link widget__link widget__link--taglist"
               href="/tags/java-bestpractices" title="java-bestpractices">java-bestpractices</a>
            <a class="tag-cloud-link widget__link widget__link--taglist"
               href="/tags/java-blogging" title="java-blogging">java-blogging</a>
            <a class="tag-cloud-link widget__link widget__link--taglist"
               href="/tags/java-springboot" title="java-springboot">java-springboot</a>
            <a class="tag-cloud-link widget__link widget__link--taglist"
               href="/tags/javaee" title="javaee">javaee</a>
            <a class="tag-cloud-link widget__link widget__link--taglist"
               href="/tags/jcart" title="jcart">jcart</a>
            <a class="tag-cloud-link widget__link widget__link--taglist"
               href="/tags/jooq" title="jooq">jooq</a>
            <a class="tag-cloud-link widget__link widget__link--taglist"
               href="/tags/jsf" title="jsf">jsf</a>
            <a class="tag-cloud-link widget__link widget__link--taglist"
               href="/tags/kafka" title="kafka">kafka</a>
            <a class="tag-cloud-link widget__link widget__link--taglist"
               href="/tags/kafka-springboot-spring" title="kafka-springboot-spring">kafka-springboot-spring</a>
            <a class="tag-cloud-link widget__link widget__link--taglist"
               href="/tags/linux" title="linux">linux</a>
            <a class="tag-cloud-link widget__link widget__link--taglist"
               href="/tags/maven" title="maven">maven</a>
            <a class="tag-cloud-link widget__link widget__link--taglist"
               href="/tags/microservices" title="microservices">microservices</a>
            <a class="tag-cloud-link widget__link widget__link--taglist"
               href="/tags/mybatis" title="mybatis">mybatis</a>
            <a class="tag-cloud-link widget__link widget__link--taglist"
               href="/tags/postman-newman-rest" title="postman-newman-rest">postman-newman-rest</a>
            <a class="tag-cloud-link widget__link widget__link--taglist"
               href="/tags/primefaces" title="primefaces">primefaces</a>
            <a class="tag-cloud-link widget__link widget__link--taglist"
               href="/tags/rabbitmq" title="rabbitmq">rabbitmq</a>
            <a class="tag-cloud-link widget__link widget__link--taglist"
               href="/tags/servlets-jsp" title="servlets-jsp">servlets-jsp</a>
            <a class="tag-cloud-link widget__link widget__link--taglist"
               href="/tags/spring" title="spring">spring</a>
            <a class="tag-cloud-link widget__link widget__link--taglist"
               href="/tags/spring-springboot-bestpractices" title="spring-springboot-bestpractices">spring-springboot-bestpractices</a>
            <a class="tag-cloud-link widget__link widget__link--taglist"
               href="/tags/spring-springboot-testing" title="spring-springboot-testing">spring-springboot-testing</a>
            <a class="tag-cloud-link widget__link widget__link--taglist"
               href="/tags/springboot" title="springboot">springboot</a>
            <a class="tag-cloud-link widget__link widget__link--taglist"
               href="/tags/springboot-testcontainers" title="springboot-testcontainers">springboot-testcontainers</a>
            <a class="tag-cloud-link widget__link widget__link--taglist"
               href="/tags/springboot-yeoman" title="springboot-yeoman">springboot-yeoman</a>
            <a class="tag-cloud-link widget__link widget__link--taglist"
               href="/tags/springcloud" title="springcloud">springcloud</a>
            <a class="tag-cloud-link widget__link widget__link--taglist"
               href="/tags/springsession" title="springsession">springsession</a>
            <a class="tag-cloud-link widget__link widget__link--taglist"
               href="/tags/tips" title="tips">tips</a>
            <a class="tag-cloud-link widget__link widget__link--taglist"
               href="/tags/travis-ci" title="travis-ci">travis-ci</a>
            <a class="tag-cloud-link widget__link widget__link--taglist"
               href="/tags/videos" title="videos">videos</a>
            <a class="tag-cloud-link widget__link widget__link--taglist"
               href="/tags/virtualbox" title="virtualbox">virtualbox</a>
        </div>
    </div>
</aside>
            </section>
        </div>
        <div id="footer" class="footer-wrap">
            <footer id="colophon" class="site-footer container clearfix" role="contentinfo">
    <div id="footer-text" class="site-info">
        <span class="credit-link">
            <a href="/" target="_blank">SivaLabs</a>
            Powered by <a href="https://gohugo.io/" target="_blank">Hugo</a>
        </span>
    </div>
</footer>

        </div>
    </div>

</body>
</html>
